@page "/events/add"

<PageTitle>Добавление мероприятия</PageTitle>

<MudStack Style="min-width:300px; max-width:750px" Class="ml-3">

    <MudText Typo="Typo.h6" Class="mb-3">Добавление мероприятия</MudText>
    <MudDivider DividerType="DividerType.FullWidth" Light="false" Class="mb-5" />

    <MudExpansionPanels MultiExpansion="true" Elevation="3">

        @* ОБЩИЕ *@
        <MudExpansionPanel Expanded="true">
            <TitleContent>
                <div class="d-flex">
                    <MudIcon Color="IsPanel1Valid ? Color.Success : Color.Default" Icon="@Icons.Material.Filled.Settings" class="mr-3" />
                    <MudText Color="IsPanel1Valid ? Color.Success : Color.Default"><b>1. Общие данные</b></MudText>
                </div>
            </TitleContent>
            <ChildContent>
                <MudGrid>
                    <MudItem sm="6" xs="12">
                        <MudTextField @bind-Value="Event.Name" Validation="@(new Func<string, Task<string?>>(NameValidator))" HelperText="Пример: Иван да Марья Мск" AdornmentIcon="@Icons.Material.Outlined.Person" AdornmentColor="@NameIconColor" Adornment="Adornment.End" Label="Имя учётной записи" Typo="Typo.body1" Margin="Margin.Normal" Variant="Variant.Text" MaxLength="StaticData.DB_ACCOUNTS_NAME_MAX" />
                    </MudItem>
                    <MudItem sm="6" xs="12">
                        <MudTextField @bind-Value="Event.Description" Validation="@(new Func<string, Task<string?>>(DescriptionValidator))" HelperText="Пример: email@mail.ru" AdornmentIcon="@Icons.Material.Outlined.Mail" AdornmentColor="@DescriptionIconColor" Adornment="Adornment.End" Label="Email" Typo="Typo.body1" Margin="Margin.Normal" Variant="Variant.Text" MaxLength="StaticData.DB_ACCOUNTS_EMAIL_MAX" />
                    </MudItem>
                </MudGrid>
            </ChildContent>
        </MudExpansionPanel>


        @* РАСПИСАНИЕ *@
        <MudExpansionPanel Disabled="!IsPanel1Valid" Expanded="IsPanel1Valid">
            <TitleContent>
                <div class="d-flex">
                    <MudIcon Color="IsPanel2Valid ? Color.Success : Color.Default" Icon="@Icons.Material.Filled.Group" class="mr-3" />
                    <MudText Color="IsPanel2Valid ? Color.Success : Color.Default"><b>2. Расписание</b></MudText>
                </div>
            </TitleContent>
            <ChildContent>

            <MudStack AlignItems="AlignItems.End">
            </MudStack>
            </ChildContent>
        </MudExpansionPanel>


        @* ФОТО *@
        <MudExpansionPanel Disabled="!(IsPanel1Valid && IsPanel2Valid)" Expanded="(IsPanel1Valid && IsPanel2Valid)">
            <TitleContent>
                <div class="d-flex">
                    <MudIcon Color="IsPanel3Valid ? Color.Success : Color.Default" Icon="@Icons.Material.Filled.Image" class="mr-3" />
                    <MudText Color="IsPanel3Valid ? Color.Success : Color.Default"><b>3. Фотографии</b></MudText>
                </div>
            </TitleContent>
            <ChildContent>
            </ChildContent>
        </MudExpansionPanel>

    </MudExpansionPanels>

    <MudStack AlignItems="AlignItems.Center" Class="mt-5" Row="false">
        <MudButton OnClick="SubmitAsync" StartIcon="@Icons.Material.Outlined.Check" Disabled="!(IsPanel1Valid && IsPanel2Valid && IsPanel3Valid && !processingEvent)" Variant="Variant.Filled" Size="Size.Large" Color="Color.Primary" Style="margin:auto">
            @if (processingEvent)
            {
                <MudProgressCircular Size="Size.Small" Style="margin:auto" Indeterminate="true" />
                <MudText Class="ms-2">Создаём...</MudText>
            }
            else
            {
                <MudText>Создать мероприятие</MudText>
            }
        </MudButton>
    </MudStack>

</MudStack>
