@if (ScheduleForEventView?.Event != null)
{
    <MudStack>
        <MudStack Row AlignItems="AlignItems.Center">
            <ImageAvatar Account="ScheduleForEventView.Event.Admin" Size="EnumImageSize.s64x64" Class="avatar s45" Title="Организатор" />
            <MudText Typo="Typo.body2"><b>Организатор:</b><br />@ScheduleForEventView.Event.Admin?.Name (@ScheduleForEventView.Event.Admin?.ToGendersAgesString())</MudText>
        </MudStack>

        <MudStack Row AlignItems="AlignItems.Center" Spacing="1">
            <MudIcon Icon="@Icons.Material.Outlined.LocationOn" Style="font-size:19px" />
            <MudText Typo="Typo.body2">@ScheduleForEventView.Event.ToRegionString() (@ScheduleForEventView.Event.Address)</MudText>
        </MudStack>

@*         @{
            var _minDate = ScheduleForEventView.Event?.Schedule?.Select(s => s.StartDate).Min().Date;
            var _maxDate = ScheduleForEventView.Event?.Schedule?.Select(s => s.StartDate).Max().Date;
            <MudStack Row AlignItems="AlignItems.Center" Spacing="1">
                <MudDatePicker DateChanged="OnScheduleDateChangedAsync" PickerVariant="PickerVariant.Dialog" Date="selectedSchedule.StartDate" MinDate="_minDate" MaxDate="_maxDate" ShowToolbar="false" AdornmentColor="Color.Success" Variant="Variant.Text" Margin="Margin.Dense" HelperText="Расписание" />
            </MudStack>
        }
    @bind-Value="selectedSchedule" SelectedValuesChanged="OnScheduleChangedAsync"
    *@
        <MudStack Row AlignItems="AlignItems.Center" Spacing="1">
            <MudSelect T="SchedulesForEventsDto" Value="selectedSchedule" ValueChanged="OnScheduleChanged" Variant="Variant.Outlined" Dense AnchorOrigin="Origin.BottomCenter" Margin="Margin.Dense" Label="Расписание" AdornmentIcon="@Icons.Material.Outlined.CalendarMonth">
                @foreach (var schedule in schedules)
                {
                    <MudSelectItem Value="@schedule" />
                }
            </MudSelect>
        </MudStack>

        <MudStack Row AlignItems="AlignItems.Center" Spacing="1">
            <MudIcon Icon="@Icons.Material.Outlined.CalendarToday" Class="@selectedSchedule.ToDateClass()" Style="font-size:18px" />
            <MudText Typo="Typo.body2"><b>@selectedSchedule.ToStartEndString()</b></MudText>
        </MudStack>

        @if (!string.IsNullOrWhiteSpace(selectedSchedule.Description))
        {
            <MudText Typo="Typo.body2">@selectedSchedule.Description</MudText>
            <MudDivider />
        }

        <MudGrid Style="text-align:center">
            @{
                <MudItem xs="4" title="Зарегистрировано пар / Свободных мест для пар">
                    <MudIcon Icon="@Icons.Material.Filled.PeopleAlt" Color="Color.Tertiary" /><br />
                    @ScheduleForEventView.NumberOfRegisteredPairs()/@ScheduleForEventView.Event.MaxPairs
                </MudItem>
                <MudItem xs="4" title="Зарегистрировано мужчин / Свободных мест для мужчин">
                    <MudIcon Icon="@Icons.Material.Outlined.Man" Color="Color.Primary" /><br />
                    @ScheduleForEventView.NumberOfRegisteredMen()/@ScheduleForEventView.Event.MaxMen
                </MudItem>
                <MudItem xs="4" title="Зарегистрировано женщин / Свободных мест для женщин">
                    <MudIcon Icon="@Icons.Material.Outlined.Woman" Color="Color.Error" /><br />
                    @ScheduleForEventView.NumberOfRegisteredWomen()/@ScheduleForEventView.Event.MaxWomen
                </MudItem>
            }
        </MudGrid>
        <MudGrid Style="text-align:center">
            @{
                var costPair = selectedSchedule.CostPair == 0 ? "Бесплатно" : selectedSchedule.CostPair.ToString() + " руб.";
                <MudItem xs="4">
                    @costPair
                </MudItem>
                var costMan = selectedSchedule.CostMan == 0 ? "Бесплатно" : selectedSchedule.CostMan.ToString() + " руб.";
                <MudItem xs="4">
                    @costMan
                </MudItem>
                var costWoman = selectedSchedule.CostWoman == 0 ? "Бесплатно" : selectedSchedule.CostWoman.ToString() + " руб.";
                <MudItem xs="4">
                    @costWoman
                </MudItem>
            }
        </MudGrid>

        @if (CurrentState.Account != null)
        {
            <MudButton Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Outlined.HowToReg" Variant="Variant.Outlined">Регистрация</MudButton>
        }

        <MudDivider />

        <MudText Typo="Typo.body2"><b>Общее описание:</b><br />@ScheduleForEventView.Event.Description</MudText>
    </MudStack>
}
