@page "/register"

@inherits AccountDtoBase

<PageTitle>Регистрация</PageTitle>

<MudStack Style="min-width:300px; max-width:750px" Class="ml-3">
    
    <MudText Align="Align.Left" Typo="Typo.h6" Class="mb-3">Регистрация</MudText>
    <MudDivider DividerType="DividerType.FullWidth" Light="false" Class="mb-5" />

    @if (AccountRequestDto != null) 
    {
        <MudExpansionPanels MultiExpansion="true" Elevation="3">

            @* ОБЩИЕ *@
            <GeneralComponent Data="@this" />

            @* ПАРТНЁРЫ *@
            <UsersComponent Data="@this" />

            @* ХОББИ *@
            <HobbiesComponent Data="@this" />

            @* ФОТО *@
            <PhotosComponent Data="@this" />

        </MudExpansionPanels>


        @* КНОПКА СОХРАНЕНИЯ *@
        <MudStack AlignItems="AlignItems.Center" Class="mt-5" Row="false">
            @if (!string.IsNullOrEmpty(AccountRequestDto.ErrorMessage))
            {
                <MudAlert Severity="Severity.Error">@AccountRequestDto.ErrorMessage</MudAlert>
            }
            <MudCheckBox @bind-Value="AccountRequestDto.Remember" Disabled="!(IsPanel1Valid && IsPanel2Valid && IsPanel3Valid && IsPanel4Valid)" Color="Color.Primary">
                <MudText Typo="Typo.body2">Запомнить меня</MudText>
            </MudCheckBox>

            <MudButton OnClick="SubmitAsync" StartIcon="@Icons.Material.Outlined.Check" Disabled="!(IsPanel1Valid && IsPanel2Valid && IsPanel3Valid && IsPanel4Valid && !ProcessingAccount)" Variant="Variant.Filled" Size="Size.Large" Color="Color.Primary" Style="margin:auto">
                @if (ProcessingAccount)
                {
                    <MudProgressCircular Size="Size.Small" Style="margin:auto" Indeterminate="true" />
                    <MudText Class="ms-2">Регистрируем...</MudText>
                }
                else
                {
                    <MudText>Зарегистрироваться</MudText>
                }
            </MudButton>
        </MudStack>
    }

</MudStack>
